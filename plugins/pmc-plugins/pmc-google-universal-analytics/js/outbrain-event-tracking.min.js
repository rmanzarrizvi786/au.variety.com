!function(){var outbrain_elements,pmc_ob_event_tracking=function(element){this.obElement=element,this.device=this.getDevice(),this.obElementDynamicLinkContainer=".ob-dynamic-rec-container",this.obElementDynamicLink=".ob-dynamic-rec-link",this.obWidgetId=element.getAttribute("data-widget-id"),this.linksData=[],this.initMutationObserver()};if(pmc_ob_event_tracking.prototype.initMutationObserver=function(){var MutationObserver=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=MutationObserver&&(this.observer=new MutationObserver(this.mutationObserverCallback.bind(this)),this.observer.observe(this.obElement,{childList:!0}))},pmc_ob_event_tracking.prototype.mutationObserverCallback=function(mutationsList,observer){var dynamicLinks=this.obElement.querySelectorAll(this.obElementDynamicLinkContainer);dynamicLinks&&0<dynamicLinks.length&&(observer.disconnect(),this.getObDynamicLinks(dynamicLinks))},pmc_ob_event_tracking.prototype.getObDynamicLinks=function(elements){var object={},link,el,index,pos;for(index=0;index<elements.length;index++)pos=index+1,(el=elements[index]).setAttribute("data-index",pos),link=(link=el.querySelector(this.obElementDynamicLink))?link.getAttribute("href"):"",object[pos]=this.cleanURL(link);this.linksData=object,this.sendGaEvent(JSON.stringify(this.linksData),!0),this.addObClickEventListener()},pmc_ob_event_tracking.prototype.addObClickEventListener=function(){this.obElement.addEventListener("click",this.obClickEventCallback.bind(this))},pmc_ob_event_tracking.prototype.obClickEventCallback=function(event){for(var el=event.srcElement||event.target,allowedTarget="_blank",linkContainerClassName,pos,elLink,elTarget,link,label,object;el&&(void 0===el.tagName||"a"!==el.tagName.toLowerCase()||!el.href);)el=el.parentNode;elLink=el.href,elTarget="_blank"===(elTarget=el.target)&&"_blank",this.isEmpty(elLink)||(el=el.parentNode,linkContainerClassName=this.obElementDynamicLinkContainer.substring(1),el&&-1===el.className.indexOf(linkContainerClassName)||((event.ctrlKey||event.shiftKey||event.metaKey||2===event.which)&&(elTarget="_blank"),pos=el.getAttribute("data-index"),link=this.linksData[pos],this.isEmpty(link)||((object={})[pos]=link,label=JSON.stringify(object),"_blank"===elTarget?this.sendGaEvent(label):(event.preventDefault(),this.sendGaEvent(label,!1,this.createFunctionWithTimeout(function(){window.location.href=elLink}))))))},pmc_ob_event_tracking.prototype.isEmpty=function(value){return null==value||0===value.length},pmc_ob_event_tracking.prototype.createFunctionWithTimeout=function(callback,opt_timeout){var called=!1;function fn(){called||(called=!0,callback())}return setTimeout(fn,opt_timeout||1e3),fn},pmc_ob_event_tracking.prototype.sendGaEvent=function(eventLabel,load,hitCallback){var isInteracting=void 0!==load&&load,label=this.device+" ["+this.obWidgetId+"] "+eventLabel,analyticsObject={hitType:"event",eventCategory:"outbrain"};analyticsObject.eventAction=load?"load":"click",analyticsObject.eventLabel=label,analyticsObject.nonInteraction=isInteracting,analyticsObject.transport="beacon",void 0!==hitCallback&&"function"==typeof hitCallback&&(analyticsObject.hitCallback=hitCallback);try{ga("send",analyticsObject)}catch(e){}},pmc_ob_event_tracking.prototype.cleanURL=function(url){return-1!==url.indexOf("traffic.outbrain.com")||-1!==url.indexOf("paid.outbrain.com")?url:url.split(/[?#]/)[0]},pmc_ob_event_tracking.prototype.getDevice=function(){var defaultDevice="[D]",deviceObject=window.pmc_ga_event_tracking,device;return deviceObject&&deviceObject.device?deviceObject.device:"[D]"},0<(outbrain_elements=document.querySelectorAll(".OUTBRAIN")).length)for(var i=0;i<outbrain_elements.length;i++)new pmc_ob_event_tracking(outbrain_elements[i])}();