!function(){"use strict";var e=window.wp.blocks,t=window.wp.i18n,l=window.wp.element,r=window.wp.primitives,a=(0,l.createElement)(r.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,l.createElement)(r.Path,{d:"M18.7 3H5.3C4 3 3 4 3 5.3v13.4C3 20 4 21 5.3 21h13.4c1.3 0 2.3-1 2.3-2.3V5.3C21 4 20 3 18.7 3zm.8 15.7c0 .4-.4.8-.8.8H5.3c-.4 0-.8-.4-.8-.8V5.3c0-.4.4-.8.8-.8h6.2v8.9l2.5-3.1 2.5 3.1V4.5h2.2c.4 0 .8.4.8.8v13.4z"}));const n=[];for(let e=0;e<=5;e++)n[e]={postId:null,title:null};const i={imageId:{type:"number",default:""},items:{type:"array",default:n}};var s=window.wp.blockEditor,o=window.wp.components,c=window.wp.coreData,m=window.wp.data,d=({setAttributes:e})=>{const r={title:(0,t.__)("Fullscreen Cover","pmc-gutenberg"),instructions:(0,t.__)("Upload a cover image file or pick one from the media library. After selecting an image, the title and introductory text can be added.","pmc-gutenberg")};return(0,l.createElement)(s.MediaPlaceholder,{onSelect:({id:t})=>e({imageId:t}),accept:"image/*",allowedTypes:["image"],labels:r})},g=window.lodash,p=(0,window.wp.compose.compose)([(0,m.withSelect)(((e,{imageId:t})=>{const{getMedia:l}=e("core");let r,a;if(t){const e=l(t);r=(0,g.get)(e,"alt_text",""),a=(0,g.get)(e,["media_details","sizes","portrait-medium","source_url"],(0,g.get)(e,"source_url",null))}return{imageAlt:r,imageUrl:a}}))])((({imageAlt:e,imageUrl:t})=>t?(0,l.createElement)("div",{className:"lrv-u-text-align-center"},(0,l.createElement)("img",{src:t,alt:e})):(0,l.createElement)(o.Spinner,null))),u=({props:{items:e,storyOptions:r,setAttributes:a,isSelected:n,classNameGridWrapper:i,classNameGridItem:s}})=>{const c=[];for(let m=0;m<=5;m++)if(n)c.push((0,l.createElement)("li",{key:m,className:i},(0,l.createElement)("div",{className:s},(0,l.createElement)(o.SelectControl,{label:(0,t.__)("Select post to highlight","pmc-gutenberg"),hideLabelFromVision:!0,options:r,value:e[m].postId,onChange:t=>{const l=[...e];l[m].postId=parseInt(t,10),a({items:l})}})),(0,l.createElement)(o.TextControl,{value:e[m].title,placeholder:(0,t.__)("Enter title override","pmc-gutenberg"),label:(0,t.__)("Enter title override","pmc-gutenberg"),hideLabelFromVision:!0,onChange:t=>{const l=[...e];l[m].title=t,a({items:l})},className:s})));else if(e[m].postId){let t=e[m].title;if(!t){const l=r.filter((t=>t.value===e[m].postId));if(!l.length)continue;t=l[0].label}c.push((0,l.createElement)("li",{key:m,className:i},t))}return c};const v="_pmc_digital_daily_issue_has_cover_ad";const w={title:(0,t.__)("PMC Fullscreen Cover","pmc-gutenberg"),description:(0,t.__)("Render image and CTA to take over full browser screen.","pmc-gutenberg"),category:"media",icon:a,attributes:i,edit:({attributes:{imageId:r,items:a},name:n,setAttributes:i,isSelected:g})=>{const w=(0,m.useSelect)((e=>e("core/editor").getCurrentPostType()),[]),_=(0,m.useSelect)((e=>e("core/editor").getCurrentPost().blockData[n])),[b,h]=(0,c.useEntityProp)("postType",w,"meta"),E=(0,e.hasBlockSupport)(n,"pmc.coverAdOverlay",!1),y="lrv-a-grid lrv-a-cols lrv-a-cols2@desktop lrv-a-cols2@tablet lrv-u-align-items-center",I="lrv-a-grid-item",f={items:a,storyOptions:_,setAttributes:i,isSelected:g,classNameGridWrapper:y,classNameGridItem:I};return(0,l.createElement)(l.Fragment,null,(0,l.createElement)("div",{className:y},(0,l.createElement)("div",{className:I},(0,l.createElement)("h3",null,(0,t.__)("In This Issue","pmc-gutenberg")),(0,l.createElement)("ul",{className:"lrv-u-padding-l-050",style:{listStyleType:"none",paddingLeft:"0.5rem",marginTop:0,marginBottom:0}},(0,l.createElement)(u,{props:f}))),(0,l.createElement)("div",{className:I},r?(0,l.createElement)(p,{imageId:r}):(0,l.createElement)(d,{setAttributes:i}))),(0,l.createElement)(s.BlockControls,null,(0,l.createElement)(o.ToolbarButton,{label:(0,t.__)("Replace Image","pmc-gutenberg"),onClick:()=>{i({imageId:""})}},(0,t.__)("Replace Image","pmc-gutenberg"))),(0,l.createElement)(s.InspectorControls,null,(0,l.createElement)(o.Panel,null,(0,l.createElement)(o.PanelBody,{title:(0,t.__)("Display options","pmc-gutenberg"),initialOpen:!1},E&&(0,l.createElement)(o.PanelRow,null,(0,l.createElement)(o.ToggleControl,{label:(0,t.__)("Issue has cover ad","pmc-gutenberg"),help:b[v]?(0,t.__)("An advertisement will overlay the cover image when the landing page first loads.","pmc-gutengerg"):(0,t.__)("No advertisement is expected to overlay the cover image when the landing page first loads.","pmc-gutengerg"),checked:b[v],onChange:e=>{h({...b,[v]:e})}}))))))},save:()=>null};(0,e.registerBlockType)("pmc/fullscreen-cover",w)}();