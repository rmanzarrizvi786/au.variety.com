!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=125)}([function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(18),i="object"==("undefined"==typeof self?"undefined":r(self))&&self&&self.Object===Object&&self,s=o||i||Function("return this")();t.exports=s},function(t,e,n){"use strict";var r=Array.isArray;t.exports=r},function(t,e,n){"use strict";var r=n(28),o=n(33);t.exports=function(t,e){var n=o(t,e);return r(n)?n:void 0}},function(t,e,n){"use strict";var r=n(13);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},function(t,e,n){"use strict";var r=n(2)(Object,"create");t.exports=r},function(t,e,n){"use strict";var r=n(42);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},function(t,e,n){"use strict";var r=n(7),o=n(29),i=n(30),s="[object Null]",c="[object Undefined]",u=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?c:s:u&&u in Object(t)?o(t):i(t)}},function(t,e,n){"use strict";var r=n(0).Symbol;t.exports=r},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=function(t){var e=void 0===t?"undefined":r(t);return null!=t&&("object"==e||"function"==e)}},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(6),i=n(10),s="[object Symbol]";t.exports=function(t){return"symbol"==(void 0===t?"undefined":r(t))||i(t)&&o(t)==s}},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=function(t){return null!=t&&"object"==(void 0===t?"undefined":r(t))}},function(t,e,n){"use strict";var r=n(23),o=n(24),i=n(25),s=n(26),c=n(27);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=o,u.prototype.get=i,u.prototype.has=s,u.prototype.set=c,t.exports=u},function(t,e,n){"use strict";var r=n(9),o=1/0;t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-o?"-0":e}},function(t,e,n){"use strict";t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,n){"use strict";var r=n(2)(n(0),"Map");t.exports=r},function(t,e,n){"use strict";var r=n(34),o=n(41),i=n(43),s=n(44),c=n(45);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=o,u.prototype.get=i,u.prototype.has=s,u.prototype.set=c,t.exports=u},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(1),i=n(9),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,c=/^\w*$/;t.exports=function(t,e){if(o(t))return!1;var n=void 0===t?"undefined":r(t);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!i(t))||(c.test(t)||!s.test(t)||null!=e&&t in Object(e))}},function(t,e,n){"use strict";var r=n(6),o=n(8),i="[object AsyncFunction]",s="[object Function]",c="[object GeneratorFunction]",u="[object Proxy]";t.exports=function(t){if(!o(t))return!1;var e=r(t);return e==s||e==c||e==i||e==u}},function(t,e,n){"use strict";(function(e){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r="object"==(void 0===e?"undefined":n(e))&&e&&e.Object===Object&&e;t.exports=r}).call(this,n(19))},function(t,e,n){"use strict";var r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"===("undefined"==typeof window?"undefined":o(window))&&(r=window)}t.exports=r},function(t,e,n){"use strict";var r=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return r.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=9007199254740991,i=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var n=void 0===t?"undefined":r(t);return!!(e=null==e?o:e)&&("number"==n||"symbol"!=n&&i.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e,n){"use strict";var r=n(1),o=n(16),i=n(48),s=n(51);t.exports=function(t,e){return r(t)?t:o(t,e)?[t]:i(s(t))}},function(t,e,n){"use strict";t.exports=function(){this.__data__=[],this.size=0}},function(t,e,n){"use strict";var r=n(3),o=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0)&&(n==e.length-1?e.pop():o.call(e,n,1),--this.size,!0)}},function(t,e,n){"use strict";var r=n(3);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},function(t,e,n){"use strict";var r=n(3);t.exports=function(t){return r(this.__data__,t)>-1}},function(t,e,n){"use strict";var r=n(3);t.exports=function(t,e){var n=this.__data__,o=r(n,t);return o<0?(++this.size,n.push([t,e])):n[o][1]=e,this}},function(t,e,n){"use strict";var r=n(17),o=n(31),i=n(8),s=n(20),c=/^\[object .+?Constructor\]$/,u=Function.prototype,p=Object.prototype,a=u.toString,l=p.hasOwnProperty,f=RegExp("^"+a.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!i(t)||o(t))&&(r(t)?f:c).test(s(t))}},function(t,e,n){"use strict";var r=n(7),o=Object.prototype,i=o.hasOwnProperty,s=o.toString,c=r?r.toStringTag:void 0;t.exports=function(t){var e=i.call(t,c),n=t[c];try{t[c]=void 0;var r=!0}catch(t){}var o=s.call(t);return r&&(e?t[c]=n:delete t[c]),o}},function(t,e,n){"use strict";var r=Object.prototype.toString;t.exports=function(t){return r.call(t)}},function(t,e,n){"use strict";var r,o=n(32),i=(r=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";t.exports=function(t){return!!i&&i in t}},function(t,e,n){"use strict";var r=n(0)["__core-js_shared__"];t.exports=r},function(t,e,n){"use strict";t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e,n){"use strict";var r=n(35),o=n(11),i=n(14);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(i||o),string:new r}}},function(t,e,n){"use strict";var r=n(36),o=n(37),i=n(38),s=n(39),c=n(40);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=o,u.prototype.get=i,u.prototype.has=s,u.prototype.set=c,t.exports=u},function(t,e,n){"use strict";var r=n(4);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(t,e,n){"use strict";t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,n){"use strict";var r=n(4),o="__lodash_hash_undefined__",i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return n===o?void 0:n}return i.call(e,t)?e[t]:void 0}},function(t,e,n){"use strict";var r=n(4),o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:o.call(e,t)}},function(t,e,n){"use strict";var r=n(4),o="__lodash_hash_undefined__";t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?o:e,this}},function(t,e,n){"use strict";var r=n(5);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=function(t){var e=void 0===t?"undefined":r(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,n){"use strict";var r=n(5);t.exports=function(t){return r(this,t).get(t)}},function(t,e,n){"use strict";var r=n(5);t.exports=function(t){return r(this,t).has(t)}},function(t,e,n){"use strict";var r=n(5);t.exports=function(t,e){var n=r(this,t),o=n.size;return n.set(t,e),this.size+=n.size==o?0:1,this}},,,function(t,e,n){"use strict";var r=n(49),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,s=r(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(o,function(t,n,r,o){e.push(r?o.replace(i,"$1"):n||t)}),e});t.exports=s},function(t,e,n){"use strict";var r=n(50),o=500;t.exports=function(t){var e=r(t,function(t){return n.size===o&&n.clear(),t}),n=e.cache;return e}},function(t,e,n){"use strict";var r=n(15),o="Expected a function";function i(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(o);var n=function n(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var s=t.apply(this,r);return n.cache=i.set(o,s)||i,s};return n.cache=new(i.Cache||r),n}i.Cache=r,t.exports=i},function(t,e,n){"use strict";var r=n(52);t.exports=function(t){return null==t?"":r(t)}},function(t,e,n){"use strict";var r=n(7),o=n(53),i=n(1),s=n(9),c=1/0,u=r?r.prototype:void 0,p=u?u.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(i(e))return o(e,t)+"";if(s(e))return p?p.call(e):"";var n=e+"";return"0"==n&&1/e==-c?"-0":n}},function(t,e,n){"use strict";t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){n(126),t.exports=n(137)},function(t,e,n){"use strict";(function(t){var e,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(127),i=(e=o)&&e.__esModule?e:{default:e};var s=function(){function t(e){var n=e.targetBox;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.targetBox=n,this.editor=null,this.selectionLength=0,this.snippet="",this.bindMethods()}return r(t,[{key:"bindMethods",value:function(){this.snippetCommand=this.snippetCommand.bind(this),this.onBeforeSetContent=this.onBeforeSetContent.bind(this),this.onPostProcess=this.onPostProcess.bind(this),this.dispatchSelectionLength=this.dispatchSelectionLength.bind(this),this.handleSelectionLengthChange=this.handleSelectionLengthChange.bind(this)}},{key:"init",value:function(){var t=this;this.initSelectionLengthElement(),tinymce.PluginManager.add("pmc_review_snippet",function(e){"content"===e.id&&t.initEditor(e)}),addEventListener("pmc_selection_length",this.handleSelectionLengthChange)}},{key:"initSelectionLengthElement",value:function(){var t=document.getElementById("wp-word-count");this.selectionLengthElement=document.createElement("SPAN"),this.selectionLengthElement.setAttribute("id","pmc-selection-length"),t.appendChild(this.selectionLengthElement)}},{key:"initEditor",value:function(t){this.editor=t,this.initButton(),this.editor.addCommand("mceReviewSnippetTag",this.snippetCommand),this.editor.on("BeforeSetContent",this.onBeforeSetContent),this.editor.on("PostProcess",this.onPostProcess),this.editor.on("NodeChange",this.dispatchSelectionLength)}},{key:"initButton",value:function(){var t=this;this.editor.addButton("pmc_review_snippet",{text:this.editor.editorManager.i18n.translate("Review Snippet"),cmd:"mceReviewSnippetTag",tooltip:this.editor.editorManager.i18n.translate("Toggle Google review snippet selection. Selection will be highlighted in yellow"),classes:"widget btn review-snippet-btn",onpostrender:function(){t.button=document.querySelector(".mce-review-snippet-btn")}})}},{key:"injectTargetBoxValue",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.snippet;this.targetBox&&(this.targetBox.value=t)}},{key:"handleSelectionLengthChange",value:function(t){var e=t.detail;this.selectionLengthElement.innerHTML=0<e?" | "+this.editor.editorManager.i18n.translate("Selection length")+": "+e:""}},{key:"snippetCommand",value:function(){var t=this.editor.selection.getContent().replace(/<p>\s+<\/p>/g,""),e=this.editor.selection.getContent({format:"text"}).trim();if(""!==this.snippet||""!==e){var n=this.editor.dom.select("SPAN.pmc_review_snippet");if(n){if(tinyMCE.execCommand("mceRemoveNode",!1,n),""===e&&n)return this.snippet="",this.injectTargetBoxValue(),void this.button.classList.remove("mce-active");if(-1<t.substring(1).indexOf("<p>"))alert(this.editor.editorManager.i18n.translate("Snippet cannot span more than one paragraph."));else if(200<e.length)alert(this.editor.editorManager.i18n.translate("The snippet cannot contain more than 200 characters."));else{if(-1<t.indexOf("<p>"))t=t.replace(/<p>/,'<p><span class="pmc_review_snippet">').replace(/<\/p>/,"</span></p>");else{var r=document.createElement("span");r.setAttribute("class","pmc_review_snippet"),r.appendChild(document.createTextNode(t)),t=r.outerHTML}this.editor.selection.setContent(t),this.snippet=e,this.injectTargetBoxValue(),this.button.classList.add("mce-active")}}}else alert(this.editor.editorManager.i18n.translate("Select text to choose snippet."))}},{key:"shortcodeToText",value:function(t){for(var e=t.slice(0),n="";/\[pmc_review_snippet|pmc_film_review_snippet\][^\0]*?\[\/pmc_review_snippet|pmc_film_review_snippet\]/g.test(e);)e=e.replace(/\[pmc_review_snippet\][^\0]*?\[\/pmc_review_snippet\]/g,function(t){if(-1<t.substring(20).indexOf("[pmc_review_snippet]"))return t=t.substring(0,20)+t.substring(20).replace(/\[pmc_review_snippet\]/g,"").replace(/\[\/pmc_review_snippet\]/,"");n=t.replace(/\[pmc_review_snippet\]/,"").replace(/\[\/pmc_review_snippet\]/,"");var e=document.createElement("span");return e.setAttribute("class","pmc_review_snippet"),e.appendChild(document.createTextNode(n)),e.outerHTML}).replace(/\[pmc_film_review_snippet\][^\0]*?\[\/pmc_film_review_snippet\]/g,function(t){if(-1<t.substring(20).indexOf("[pmc_film_review_snippet]"))return t=t.substring(0,20)+t.substring(20).replace(/\[pmc_film_review_snippet\]/g,"").replace(/\[\/pmc_film_review_snippet\]/,"");n=t.replace(/\[pmc_film_review_snippet\]/,"").replace(/\[\/pmc_film_review_snippet\]/,"");var e=document.createElement("span");return e.setAttribute("class","pmc_review_snippet"),e.appendChild(document.createTextNode(n)),e.outerHTML});return{content:e,text:n}}},{key:"textToShortcode",value:function(t){for(var e=t.slice(0),n="";-1<e.indexOf('<span class="pmc_review_snippet">');)e=e.replace(/<span class="pmc_review_snippet">.*?<\/span>/g,function(t){return-1<t.substring(33).indexOf('<span class="pmc_review_snippet">')?t=t.substring(0,33)+t.substring(33).replace(/<span class="pmc_review_snippet">/g,"").replace(/<\/span>/,""):"[pmc_review_snippet]"+(n=t.replace(/<span class="pmc_review_snippet">/,"").replace(/<\/span>/,""))+"[/pmc_review_snippet]"});return{content:e,text:n}}},{key:"onBeforeSetContent",value:function(t){if(t.content){var e=this.shortcodeToText(t.content),n=e.text,r=e.content;t.content=r,this.snippet=n,this.injectTargetBoxValue()}}},{key:"onPostProcess",value:function(t){if(t.save){var e=this.textToShortcode(t.content),n=e.text,r=e.content;0<n.length?this.button.classList.add("mce-active"):this.button.classList.remove("mce-active"),t.content=r,this.snippet=n}}},{key:"dispatchSelectionLength",value:function(){var t=this.editor.selection.getContent({format:"text"}).length;this.selectionLength!==t&&(this.selectionLength=t,dispatchEvent(new CustomEvent("pmc_selection_length",{detail:this.selectionLength})))}}]),t}();if("tinymce"in t){var c=new s({targetBox:document.getElementById("pmc-review-snippet")});c.init(),(0,i.default)(t,"snippetButton",c)}}).call(this,n(19))},function(t,e,n){"use strict";var r=n(128);t.exports=function(t,e,n){return null==t?t:r(t,e,n)}},function(t,e,n){"use strict";var r=n(129),o=n(22),i=n(21),s=n(8),c=n(12);t.exports=function(t,e,n,u){if(!s(t))return t;for(var p=-1,a=(e=o(e,t)).length,l=a-1,f=t;null!=f&&++p<a;){var h=c(e[p]),y=n;if(p!=l){var v=f[h];void 0===(y=u?u(v,h,f):void 0)&&(y=s(v)?v:i(e[p+1])?[]:{})}r(f,h,y),f=f[h]}return t}},function(t,e,n){"use strict";var r=n(130),o=n(13),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var s=t[e];i.call(t,e)&&o(s,n)&&(void 0!==n||e in t)||r(t,e,n)}},function(t,e,n){"use strict";var r=n(131);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},function(t,e,n){"use strict";var r=n(2),o=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=o},,,,,,function(t,e){}]);