/*! 
 * PMC Video Playlist Manager JavaScript Library 
 */
!function(a,b){var c=function(){var c,d,e,f,g,h,i,j,k,l=this,m=99,n="pvm_jwplayer_carousel_div";l.initialize=function(){var a,h=b("[data-pvm-video-carousel]"),i=b(".l-pvm-video--carousel .l-pvm-video__playlist li");this.isJWPlayerActive=!1,this.jwplayerInstance=!1,"function"==typeof jwplayer&&(this.jwplayerInstance=jwplayer(n)),this.slider=h.find("[data-pvm-video-slider]"),this.jwplayerSlide=b("#pvm-carousel-jwplayer"),d=h.find("[data-pvm-video]"),0!==d.length&&0!==i.length&&(e=h.find("[data-pvm-video-trigger]"),f=e.filter('[data-pvm-video-trigger="next"]'),g=e.filter('[data-pvm-video-trigger="prev"]'),c=d.length,a=d.filter(".is-active").first(),1===a.length?l.setActiveSlide(a):l.setActiveSlide(d.first()),b(document).ready(function(){l.initializeJWplayerSetup()}),"object"==typeof pmc&&"object"==typeof pmc.hooks&&"function"==typeof pmc.hooks.add_action&&pmc.hooks.add_action("pvm-onclick-carousel-player-link",function(){l.onClickPlayerLink.apply(l,arguments)}),e.on("click",function(a){a.preventDefault(),l.changeSlide(a.currentTarget.dataset.pvmVideoTrigger)}),i.on("touchstart",l.swipeTouchStart),i.on("touchmove",l.swipeTouchMove))},l.initializeJWplayerSetup=function(){var a=this.slider.find("[id ^=jwplayer_][id $=_div]").first(),b=!1,c=!1,d=!1;"function"!=typeof jwplayer||"undefined"==typeof a||0>=a.length||(b=document.getElementById(n),c=a.data("videoid"),d=a.data("jsonfeed"),null!==b&&("undefined"!=typeof d&&d||(d="https://content.jwplatform.com/feeds/"+c+".json"),this.jwplayerInstance=pmc_jwplayer(n).setup({playlist:d,ph:2,autostart:!1}).instance()))},l.setActiveSlide=function(a){var k,l=a.data("pvm-video"),n=d.index(a);n!==m&&(isNaN(i)&&(j=e[3].offsetWidth,i=(a.width()/j).toPrecision(1),h=(c-i)*j),k=(n-(i-1.5))*j,k>h?k=h:0>k&&(k=0),b("ul li.l-pvm-video__item").eq(0).css("margin-left",-k+"px"),d.eq(0).css("margin-left",100*-n+"%"),d.filter(".is-active").removeClass("is-active").find(".c-pvm-player").trigger("player:reset"),d.filter('[data-pvm-video="'+l+'"]').addClass("is-active"),e.removeClass("is-active").filter("[data-pvm-video-trigger='"+l+"']").addClass("is-active"),f.toggleClass("is-hidden",n===c-1),b("div.l-pvm-video__shadow-right").toggleClass("is-hidden",n===c-1),g.toggleClass("is-hidden",0===k),b("div.l-pvm-video__shadow-left").toggleClass("is-hidden",0===k),m=n)},l.changeSlide=function(a){var b,c=0;l.removeJWplayerDOM(),"next"===a?l.scrollPlaylist(a):"prev"===a?l.scrollPlaylist(a):(b=d.filter('[data-pvm-video="'+a+'"]'),c=d.index(b),l.setActiveSlide(d.eq(c)),l.triggerPlay(b))},l.scrollPlaylist=function(a){var c=0,d=b("ul li.l-pvm-video__item").eq(0),e=d.css("margin-left");if("next"===a)c=parseInt(e,10)-1.5*j,c=c<-h?-h:c;else{if("prev"!==a)return;c=parseInt(e,10)+1.5*j,c=0<c?0:c}d.css("margin-left",c+"px"),f.toggleClass("is-hidden",c===-h),b("div.l-pvm-video__shadow-right").toggleClass("is-hidden",c===-h),g.toggleClass("is-hidden",0===c),b("div.l-pvm-video__shadow-left").toggleClass("is-hidden",0===c)},l.triggerPlay=function(a){0<a.find(".c-pvm-player__link").length&&a.find(".c-pvm-player__link").trigger("click")},l.swipeTouchStart=function(a){k=a.originalEvent.touches[0].clientX},l.swipeTouchMove=function(a){var b,c;k&&(b=a.originalEvent.touches[0].clientX,c=k-b,10<Math.abs(c)&&(0>c?l.scrollPlaylist("prev"):l.scrollPlaylist("next")),k=null)},l.onClickPlayerLink=function(c,d,e){var f=document.getElementById(n),g=!1,h=!1,i=!1;"undefined"!=typeof e&&"jwplayer"===e&&!1===this.isJWPlayerActive&&null!==f&&"function"==typeof jwplayer&&"object"==typeof c&&"function"==typeof c.getConfig&&(g=b("#"+d),h=g.data("videoid"),i=g.data("jsonfeed"),this.slider.addClass("l-pvm-video__carousel--playing"),this.jwplayerSlide.addClass("is-active"),"undefined"!=typeof i&&i||(i="http://content.jwplatform.com/feeds/"+h+".json"),this.jwplayerInstance=pmc_jwplayer(n).setup({playlist:i,ph:2}).instance(),"object"==typeof pmc_video_ads&&"function"==typeof pmc_video_ads.setup_jwplayer&&pmc_video_ads.setup_jwplayer(n),"undefined"!=typeof a.pmc_ga_jwplayer&&"function"==typeof a.pmc_ga_jwplayer.setup_tracking_by_object&&a.pmc_ga_jwplayer.setup_tracking_by_object(f),this.jwplayerInstance.play(!0),this.isJWPlayerActive=!0)},l.removeJWplayerDOM=function(){!0===this.isJWPlayerActive&&(this.jwplayerSlide.removeClass("is-active"),this.jwplayerInstance.stop(),this.jwplayerInstance.remove(),this.isJWPlayerActive=!1,this.slider.removeClass("l-video__carousel--playing"))},l.initialize()};b(function(){a.PMCVideoPlaylistItems=new c})}(window,jQuery);