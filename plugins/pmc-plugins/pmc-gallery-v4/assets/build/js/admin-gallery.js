!function(i){var a={};function r(e){if(a[e])return a[e].exports;var t=a[e]={i:e,l:!1,exports:{}};return i[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}r.m=i,r.c=a,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(i,a,function(e){return t[e]}.bind(null,a));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=262)}({262:function(e,t,i){"use strict";i.r(t);i(263),i(264),i(265),i(266),i(267),i(268),i(269),i(270),i(271),i(272),i(273)},263:function(e,t){!function(r){"use strict";var t={TinyMceCaptionId:"",CaptionTextAreaObj:!1,BindMetaBoxCaptionTinyMce:function(){var e;tinyMCE.EditorManager.editors=[],(e=r('.attachment-details .setting[data-setting="caption"]')).length&&(t.TinyMceCaptionId="pmc-details-caption-"+r(".attachment-details").data("id"),r(e).find("textarea").addClass("mceEditor").attr("id",t.TinyMceCaptionId),t.delegateToolbar=!1,t.AttachTinyMce(t.TinyMceCaptionId))},AttachTinyMce:function(e){var i=!1,a="#"+e;/TEXTAREA|INPUT/i.test(r(a)[0].nodeName)||(i=!0),tinyMCE.execCommand("mceRemoveEditor",!1,e),setTimeout(function(){tinyMCE.PluginManager.add("formatoptions",function(a){["h3"].forEach(function(i){a.addButton("style-"+i,{tooltip:"Toggle "+i,text:i.toUpperCase(),onClick:function(){a.execCommand("mceToggleFormat",!1,i)},onPostRender:function(){function e(){a.formatter.formatChanged(i,function(e){t.active(e)})}var t=this;a.formatter?e():a.on("init",e)}})})});var e="paste, formatoptions, wordpress, wplink",t="bold italic style-h3 | strikethrough | link unlink |";window.pmcGalleryV4AdminGallery.pmcBuyNowEnabled&&(e+=", pmc_buy_now_button",t+="| pmc_buy_now_button"),tinyMCE.init({selector:a,theme:"modern",inline:i,plugins:e,width:"100%",resize:!0,statusbar:!0,menubar:!1,relative_urls:!1,remove_script_host:!1,toolbar1:t,paste_as_text:!0,setup:function(e){e.on("change",function(){e.save()}),e.on("blur",function(){r(this.targetElm).change()});try{!e.wp&&tinyMCE.editors&&tinyMCE.editors[0]&&tinyMCE.editors[0].wp?e.wp=tinyMCE.editors[0].wp:e.wp||(e.wp={_createToolbar:function(){return{on:function(){}}}})}catch(e){console&&console.error&&console.error("Something went wrong!")}}})},100)}};window.PmcGalleryAdminScript=t}(jQuery)},264:function(e,t){!function(e,i){"use strict";e(document).ready(function(){var e=window.pmc||{},t=i.view.Attachment.Details.TwoColumn;e.view=e.view||{},e.view.AttachmentDetailsTwoColumn=t.extend({save:function(e,t){var i,a,r={modified_gmt:this.getUTCStamp(new Date)};r[e]=t,this.options.bulkEdit&&(i=this.controller.state().frame.options.selection.models,a=this.model.get("id"),i.forEach(function(e){a!==e.get("id")&&e.set(r,{silent:!0})})),this.model.set(r)},getUTCStamp:function(e){var t=e.getUTCDate(),i=e.getUTCMonth(),a=e.getUTCFullYear(),r=e.getUTCMinutes(),n=e.getUTCHours(),o=e.getUTCSeconds();return 1===(i+=1).toString().length&&(i="0"+i),1===t.toString().length&&(t="0"+t),1===n.toString().length&&(n="0"+n),1===r.toString().length&&(r="0"+r),1===o.toString().length&&(o="0"+o),a+"-"+i+"-"+t+" "+n+":"+r+":"+o}}),_.extend(window.pmc,e)})}(jQuery,wp.media)},265:function(e,t){!function(i,a){"use strict";i(document).ready(function(){var e=window.pmc||{},t=a.view.AttachmentCompat;e.view=e.view||{},e.view.AttachmentCompat=t.extend({render:function(){return t.prototype.render.apply(this,arguments),i(".compat-field-image_credit input",this.$el).attr("data-setting","image_credit").val(this.model.get("image_credit")),i(".compat-field-image_source_url input",this.$el).attr("data-setting","image_source_url").val(this.model.get("image_source_url")),this},save:function(){}}),_.extend(window.pmc,e)})}(jQuery,wp.media)},266:function(e,t){!function(e,s){"use strict";e(document).ready(function(){var a=window.pmc||{},o=s.view.Attachment;a.view=a.view||{},a.view.Attachment=o.extend({initialize:function(){switch(this.controller.content.mode()){case"gallery_edit":this.buttons={close:!0,check:!0};break;default:this.buttons={check:!0}}o.prototype.initialize.apply(this,arguments)},events:function(){return _.extend({},o.prototype.events,{"dblclick .js--select-attachment":"openModal","click .close":"removeFromLibrary"})},render:function(){o.prototype.render.apply(this,arguments)},openModal:function(){var e,t=this.controller.content.mode(),i=this.controller.state();return"gallery_edit"===t&&(e=(i=this.controller.state("gallery-edit")).get("selection")),void 0!==e&&1<e.length?new a.view.BulkEditAttachments({frame:"edit-attachments",controller:this.controller,library:i.get("library"),selection:i.get("selection"),model:this.model}):new a.view.EditAttachments({frame:"edit-attachments",controller:this.controller,library:i.get("library"),model:this.model})},removeFromLibrary:function(){o.prototype.removeFromLibrary.apply(this,arguments);var e=this.controller,t=e.state("gallery-edit"),i=t.get("selection"),a=this.model.get("attachment_id"),r=e.state("gallery-library").get("library"),n=s.model.Attachment.get(a);i.remove(this.model),n.fetch(),void 0!==n.get("id")&&r.add(n),t.get("library").trigger("bulk:remove",[n])},updateSetting:function(){o.prototype.updateSetting.apply(this,arguments),window.PmcGalleryAdminScript.BindMetaBoxCaptionTinyMce()},save:function(e,t){"gallery_edit"===this.controller.content.mode()?this.model.set(e,t):o.prototype.save.apply(this,arguments)}}),_.extend(window.pmc,a)})}(jQuery,wp.media)},267:function(e,t){!function(n,o){"use strict";n(document).ready(function(){var r=window.pmc||{},a=o.view.MediaFrame.EditAttachments;r.view=r.view||{},r.view.EditAttachments=a.extend({initialize:function(){a.prototype.initialize.apply(this,arguments)},createModal:function(){this.controller.trigger("edit-attachments:open",this),a.prototype.createModal.apply(this,arguments),this.attachIndexToHeader(),this.enableToolTips(),window.PmcGalleryAdminScript.BindMetaBoxCaptionTinyMce(),this.modal.on("close",_.bind(function(){this.modal.$el.remove(),this.controller.trigger("edit-attachments:close",this)},this))},editMetadataMode:function(e){var t=this.controller.content.mode();e.view="gallery_edit"===t?new r.view.AttachmentDetailsTwoColumn({controller:this,model:this.model}):new o.view.Attachment.Details.TwoColumn({controller:this,model:this.model}),"gallery_edit"!==t&&isNaN(parseInt(this.model.get("gallery_id"),0))?e.view.views.set(".attachment-compat",new o.view.AttachmentCompat({controller:this,model:this.model})):e.view.views.set(".attachment-compat",new r.view.AttachmentCompat({controller:this,model:this.model}))},rerender:function(){a.prototype.rerender.apply(this,arguments),this.attachIndexToHeader(),this.enableToolTips(),window.PmcGalleryAdminScript.BindMetaBoxCaptionTinyMce()},resetRoute:function(){},attachIndexToHeader:function(){var e=n('<span class="current-attachment-number"></span>'),t=this.$(".edit-media-header").find(".current-attachment-number"),i=a.prototype.getCurrentIndex.apply(this,arguments)+1+"/"+this.library.length;t.length?n(t).text(i):(n(e).text(i),n(e).prependTo(".edit-media-header"))},enableToolTips:function(){this.$(".imgedit-help-toggle").tooltip({position:{my:"right bottom-20",at:"right top",using:function(e,t){n(this).css(e),n("<div>",{class:["arrow",t.vertical,t.horizontal].join(" ")}).appendTo(this)}}})},keyEvent:function(e){("INPUT"!==e.target.nodeName&&"TEXTAREA"!==e.target.nodeName||e.target.readOnly||e.target.disabled)&&(39===e.keyCode&&this.nextMediaItem(e),37===e.keyCode&&this.previousMediaItem(e))},previousMediaItem:function(e){a.prototype.previousMediaItem.apply(this,arguments),this.library.trigger("edit:attachments:move:previous",e,this)},nextMediaItem:function(e){a.prototype.nextMediaItem.apply(this,arguments),this.library.trigger("edit:attachments:move:next",e,this)}}),r.view.BulkEditAttachments=r.view.EditAttachments.extend({initialize:function(){r.view.EditAttachments.prototype.initialize.apply(this,arguments)},createModal:function(){r.view.EditAttachments.prototype.createModal.apply(this,arguments),this.$el.addClass("bulk-edit-frame"),this.removeHeader()},editMetadataMode:function(e){var t=this.controller.content.mode(),i=this.controller.state("gallery-edit").get("selection"),a=[];!1!==i.multiple&&(i.models.forEach(function(e,t){a[t]=e.id}),e.view=new r.view.AttachmentDetailsTwoColumn({controller:this,model:this.model,bulkEdit:!0,modelIds:a})),"gallery_edit"!==t&&isNaN(parseInt(this.model.get("gallery_id"),0))?e.view.views.set(".attachment-compat",new o.view.AttachmentCompat({controller:this,model:this.model})):e.view.views.set(".attachment-compat",new r.view.AttachmentCompat({controller:this,model:this.model}))},rerender:function(){r.view.EditAttachments.prototype.rerender.apply(this,arguments),this.removeHeader()},resetRoute:function(){},isBulkEdit:function(){var e=this.controller.state("gallery-edit").get("selection");return!1!==e.multiple||e.multiple},removeHeader:function(){this.isBulkEdit()&&this.$(".edit-media-header").remove()},previousMediaItem:function(){},nextMediaItem:function(){}}),_.extend(window.pmc,r)})}(jQuery,wp.media)},268:function(e,t){!function(e,i){"use strict";e(document).ready(function(){var e=window.pmc||{},t=i.view.l10n;e.view=e.view||{},e.view.selectionAll=i.View.extend({tagName:"div",className:"media-selection select-all",template:_.template('<div class="selection-info"><button type="button" class="button-link select-all">'+t.selectAll+"</button></div>"),events:{"click .select-all":"selectAll"},initialize:function(e){this.state=e.state,this.library=this.state.get("library"),this.selection=this.state.get("selection"),this.selection.on("add remove reset",this.refresh,this),this.controller.on("content:activate",this.refresh,this)},selectAll:function(e){e.preventDefault(),this.selection.reset(this.library.toArray())},ready:function(){this.refresh()},refresh:function(){0<this.selection.length?this.$el.addClass("empty"):this.$el.removeClass("empty")}}),_.extend(window.pmc,e)})}(jQuery,wp.media)},269:function(e,t){!function(l,e){"use strict";l(document).ready(function(){var i=window.pmc||{},a=e.view.l10n,t=e.view.MediaFrame.Post;i.Post=t.extend({initialize:function(){t.prototype.initialize.apply(this,arguments),this.on("content:create:gallery_edit",this.galleryEditContent,this),this.on("content:deactivate:gallery_edit",this.galleryEditDeactivated,this),this.on("content:activate",this.galleryAddToolbar,this)},galleryMenu:function(){},browseRouter:function(e){t.prototype.browseRouter.apply(this,arguments),e.set({gallery_edit:{text:a.editGalleryTitle,priority:50}})},browseContent:function(e){var t=this.state();t.set("AttachmentView",i.view.Attachment),this.$el.removeClass("hide-toolbar"),e.view=new wp.media.view.AttachmentsBrowser({controller:this,collection:t.get("library"),selection:t.get("selection"),model:t,sidebar:!1,sortable:t.get("sortable"),search:t.get("searchable"),filters:t.get("filterable"),date:t.get("date"),display:t.has("display")?t.get("display"):t.get("displaySettings"),dragInfo:t.get("dragInfo"),idealColumnWidth:t.get("idealColumnWidth"),suggestedWidth:t.get("suggestedWidth"),suggestedHeight:t.get("suggestedHeight"),AttachmentView:t.get("AttachmentView")}),this.selectionStatusToolbar(e.view.toolbar)},galleryEditContent:function(){var e,t=this.state("gallery-edit"),o=t.get("library"),s=t.get("selection");this.$el.removeClass("hide-toolbar"),s.multiple="add",this.$el.addClass("gallery-edit"),(e=new wp.media.view.AttachmentsBrowser({controller:this,collection:o,selection:s,model:t,sidebar:!1,display:!0,dragInfo:t.get("dragInfo"),search:t.get("searchable"),filters:t.get("filterable"),date:t.get("date"),describe:!0,AttachmentView:i.view.Attachment,sortable:{start:function(e,t){t.item.data("sortableIndexStart",t.item.index())},helper:function(e,t){if(!s.length||!t.hasClass("selected"))return t;var i=t.parent().children(".selected").clone(),a=l("<li></li>");return t.data("multidrag",i).siblings(".selected").addClass("hidden"),i.css({width:t.outerWidth(),height:t.outerHeight()}).addClass("helper"),a.css({width:t.outerWidth()*i.length,height:t.outerHeight()}),a.append(i),a},stop:function(e,t){t.item.siblings(".selected").removeClass("hidden")},update:function(e,t){var i=o,a=i.at(t.item.data("sortableIndexStart")),r=i.comparator,n=t.item.index();delete i.comparator,s.length&&t.item.hasClass("selected")?(s.each(function(e){i.remove(e)}),s.each(function(e,t){i.add(e,{at:n+t})})):(i.remove(a,{silent:!0}),i.add(a,{silent:!0,at:t.item.index()})),i.comparator=r,i.trigger("reset",i),i.trigger("reset:order",i),i.saveMenuOrder()}}})).toolbar.set("selectall",new i.view.selectionAll({controller:this,state:t,priority:-40})),e.toolbar.set("selection",new wp.media.view.Selection({controller:this,collection:t.get("selection"),priority:-40,editable:t.get("editable")&&function(){this.controller.content.mode("edit-selection")}})),e.toolbar.set("reverse",{text:a.reverseOrder,priority:80,click:function(){o.reset(o.toArray().reverse()),o.trigger("reset:order",o)}}),e.toolbar.set("sortNumerically",{text:a.sortNumerically,priority:80,click:function(){var e=o.toArray().sort(function(e,t){return e.get("attachment_id")-t.get("attachment_id")});o.reset(e),o.trigger("reset:order",o)}}),e.toolbar.set("sortAlphabetically",{text:a.sortAlphabetically,priority:80,click:function(){var e=o.toArray().sort(function(e,t){var i=e.get("filename").replace(new RegExp("-","g"),"");return t.get("filename").replace(new RegExp("-","g"),"")<i});o.reset(e),o.trigger("reset:order",o)}}),e.toolbar.set("sortCreatedDate",{text:a.sortCreatedDate,priority:80,click:function(){var e=o.toArray().sort(function(e,t){var i=e.get("attachment_created_timestamp");return t.get("attachment_created_timestamp")<i});o.reset(e),o.trigger("reset:order",o)}}),e.toolbar.set("editmetadata",{text:a.editmetadata,priority:-70,click:function(){0<s.length&&l("li.selected .js--select-attachment",e.attachments.$el).first().trigger("dblclick")}}),e.toolbar.set("sendToFront",{text:"Send to front",priority:-60,click:function(){s.each(function(e,t){o.remove(e),o.add(e,{at:t})}),o.trigger("reset:order",o)}}),e.toolbar.set("sendToBack",{text:"Send to back",priority:-60,click:function(){s.each(function(e){o.remove(e),o.add(e)}),o.trigger("reset:order",o)}}),e.toolbar.set("bulkRemove",{text:a.remove,priority:-70,click:function(){var e=s.models;s.each(function(e){o.remove(e)}),s.reset(),o.trigger("bulk:remove",e)}}),o.observe(wp.Uploader.queue),this.content.set(e)},removeGallerySelection:function(){this.state("gallery-edit").get("selection").reset()},galleryEditDeactivated:function(){var e=this.state("gallery-edit").get("library");this.$el.removeClass("gallery-edit"),e.unobserve(wp.Uploader.queue)},galleryAddToolbar:function(){var s=this.content.mode(),e=a.addToGallery,t={selection:!0};"gallery_edit"===s&&(e=a.updateGallery,t={}),this.toolbar.set(new wp.media.view.Toolbar({controller:this,items:{insert:{style:"primary",text:e,priority:80,requires:t,click:function(){var e,t,i,a,r,n=this.controller,o=[];"gallery_edit"===s?((e=n.state("gallery-edit")).trigger("update",e.get("library")),n.setState(n.options.state),n.reset()):(e=n.state(),t=n.state("gallery-edit"),a=e.get("selection"),r="undefined"!=typeof pmc_gallery_admin_options&&"prepend"===pmc_gallery_admin_options.add_gallery,a.each(function(e){-1!==_.indexOf(o,parseInt(e.get("attachment_id"),0))?a.remove(e):"single_use"===l(".compat-field-restricted_image_type input:checked",e.attributes.compat.item).val()&&""!==l(".compat-field-restricted_image_type input:checked",e.attributes.compat.item).data("singleusepost")&&l("#post_ID").val()!==l(".compat-field-restricted_image_type input:checked",e.attributes.compat.item).data("singleusepost")?(alert(e.get("filename")+" is restricted to SINGLE USE only, it cannot be added to this gallery or post."),a.remove(e)):o.push(parseInt(e.get("attachment_id"),0))}),i=a.models,r?t.get("library").add(i,{at:0}):t.get("library").add(i),e.trigger("reset"),t.get("library").trigger("bulk:add",i,r),n.content.mode("gallery_edit"))}}}}))}}),_.extend(i.Post,t),_.extend(window.pmc,i)})}(jQuery,wp.media)},270:function(e,t){!function(s){"use strict";s(document).ready(function(){(window.pmc||{}).GoogleAnalyticEvents=Backbone.View.extend({initialize:function(e){var t=this;this.location=window.location.href,"undefined"!=typeof pmc_gallery_admin_user&&(this.user=pmc_gallery_admin_user.user_login),this.mediaFrame=e.mediaFrame,this.mediaFrame.on("update",this.save,this),s("#publish, #save-post").click(function(e){t.save(e)}),this.mediaFrame.state("gallery-edit").get("library").on("change",this.onMetaChange,this),this.mediaFrame.state("gallery-library").get("library").on("change",this.onMetaChange,this),this.mediaFrame.state("gallery-edit").get("library").on("edit:attachments:move:next",this.editAttachmentMoveNext,this),this.mediaFrame.state("gallery-edit").get("library").on("edit:attachments:move:previous",this.editAttachmentMovePrevious,this),this.mediaFrame.state("gallery-library").get("library").on("edit:attachments:move:next",this.editAttachmentMoveNext,this),this.mediaFrame.state("gallery-library").get("library").on("edit:attachments:move:previous",this.editAttachmentMovePrevious,this),this.mediaFrame.on("edit-attachments:open",this.editAttachmentOpen,this)},events:{"keyup #media-search-input":"search","change #media-search-input":"search","search #media-search-input":"search","click .search-form .media-button-reverse":"reverse_order","click .search-form .media-button-sortNumerically":"sort_number","click .search-form .media-button-sortAlphabetically":"sort_A_Z","click .search-form .media-button-sortCreatedDate":"sort_created_date","click .media-button-sendToFront":"send_to_front","click .media-button-sendToBack":"send_to_back"},onMetaChange:function(e){if(void 0===e)return!1;var t="single";"gallery_edit"===this.mediaFrame.content.mode()&&1<this.mediaFrame.state("gallery-edit").get("selection").length&&(t="bulk");var i,a,r=Object.keys(e.changed).pop(),n="edit",o=e.changed[r];switch(""===e._previousAttributes[r]&&(n="add"),r){case"compat":a="image_credit_"+t,o=s(".compat-field-image_credit input",e.changed.compat.item).val();break;case"alt":a="image_alt_text_"+t;break;case"image_credit":a="image_credit_"+t;break;default:a="image_"+r+"_"+t}i={eventCategory:a,eventAction:n,eventLabel:this.user+"_"+this.location+"_"+o},this.push(i)},search:function(e){var t={eventCategory:"search",eventAction:"perform",eventLabel:this.user+"_"+this.location+"_"+e.target.value};this.push(t)},save:function(e){var t=!1;void 0!==e.target?"save draft"===(t=(t=e.target.value).toLowerCase())&&(t="save"):t="update";var i={eventCategory:"content",eventAction:t,eventLabel:this.user+"_"+this.location};this.push(i)},reverse_order:function(e){this.sort(e,"reverse_order")},sort_number:function(e){this.sort(e,"sort_number")},sort_A_Z:function(e){this.sort(e,"sort_A_Z")},sort_created_date:function(e){this.sort(e,"sort_created_date")},sort:function(e,t){var i={eventCategory:t,eventAction:e.type,eventLabel:this.user+"_"+this.location};this.push(i)},send_to_front:function(e){var t={eventCategory:"send_to_front",eventAction:e.type,eventLabel:this.user+"_"+this.location};this.push(t)},send_to_back:function(e){var t={eventCategory:"send_to_back",eventAction:e.type,eventLabel:this.user+"_"+this.location};this.push(t)},editAttachmentMoveNext:function(e){var t={eventCategory:"next_image",eventAction:e.type,eventLabel:this.user+"_"+this.location};this.push(t)},editAttachmentMovePrevious:function(e){var t={eventCategory:"prev_image",eventAction:e.type,eventLabel:this.user+"_"+this.location};this.push(t)},editAttachmentOpen:function(e){var t=1<e.controller.state("gallery-edit").get("selection").length?"bulk_image_edit":"single_image_edit",i={eventCategory:t,eventAction:"view",eventLabel:this.user+"_"+this.location};this.push(i)},push:function(e){"function"==typeof ga&&ga("send","event",e)}})})}(jQuery)},271:function(e,t){!function(y){"use strict";y(document).ready(function(){y(this).on("click","#TB_closeWindowButton",function(){"function"==typeof tb_remove&&tb_remove()}),wp.media.pmc_gallery={editGalleryLibreryCache:{},frame:function(){var e,t,i=this;return this._frame||(this._frame=new window.pmc.Post({id:"pmc-gallery",frame:"post",state:"gallery-library",title:wp.media.view.l10n.editGalleryTitle,editing:!0,multiple:!0,selection:this.select()}),e=this._frame.state("gallery-edit").get("library"),t=this._frame.state("gallery-library").get("library"),this._frame.on("open",function(){i.Analytic=new window.pmc.GoogleAnalyticEvents({el:"#pmc-gallery",mediaFrame:i._frame})}),this._frame.on("edit-attachments:open",function(e){setTimeout(function(){i.validateImageCredit(e.model),i.validateImageSourceUrl(e.model),i.validateImageRestriction(e.model)},500)}),this._frame.on("update",function(){wp.media.pmc_gallery.save()}),e.on("bulk:add",function(e,t){i.bulkAddAttachment(e,t)}),e.on("bulk:remove",function(e){i.bulkRemoveAttachment(e)}),e.on("reset:order",function(e){i.reorderAttachment(e)}),this._frame.on("edit-attachments:close",this.edit_attachment_close,this),e.on("change",this.onChangeAttachment),t.on("change",this.onChangeAttachmentFromMediaLibrary),t.on("remove",this.onRemoveAttachmentFromMediaLibrary),t.on("edit:attachments:move:next edit:attachments:move:previous",function(e,t){y(".mce-toolbar-grp").css("display","none"),void 0!==t.model.attributes.compat.item&&(t.model.set("image_credit",y(".compat-field-image_credit input",t.model.attributes.compat.item).val()),t.model.set("image_source_url",y(".compat-field-image_source_url input",t.model.attributes.compat.item).val()),t.model.set("image_restriction",y(".compat-field-restricted_image_type input:checked",t.model.attributes.compat.item).val()),i.validateImageCredit(t.model),i.validateImageSourceUrl(t.model),i.validateImageRestriction(t.model))}),e.on("edit:attachments:move:next edit:attachments:move:previous",function(e,t){y(".mce-toolbar-grp").css("display","none"),i.validateImageCredit(t.model),i.validateImageSourceUrl(t.model),i.validateImageRestriction(t.model)}),this._frame.on("content:activate",function(){var e=i._frame.content.mode();y("#pmc-gallery .media-frame-content .media-toolbar-secondary .media-selection").prependTo("#pmc-gallery > .media-frame-toolbar .media-toolbar-secondary"),"gallery_edit"!==e&&(i.editGalleryLibreryCache=i._frame.state("gallery-edit").get("library").toJSON())})),this._frame},edit_attachment_close:function(){var e=this._frame.content.mode(),t=this._frame.state("gallery-edit").get("selection");"gallery_edit"===e&&t.reset()},bulkAddAttachment:function(e,t){var i,a,r={sub_action:"add",is_prepend:t?1:0},n={};for(a in e)e[a].set("gallery_id",wp.media.view.settings.post.id,{silent:!0}),void 0!==e[a].attributes.compat.item&&(e[a].set("image_credit",y(".compat-field-image_credit input",e[a].attributes.compat.item).val(),{silent:!0}),e[a].set("image_source_url",y(".compat-field-image_source_url input",e[a].attributes.compat.item).val(),{silent:!0}),e[a].set("image_restriction",y(".compat-field-restricted_image_type input:checked",e[a].attributes.compat.item).val(),{silent:!0})),i=e[a].toJSON(),n[a]={id:i.attachment_id,author:i.author,title:i.title,description:i.description,caption:i.caption,alt:i.alt,pinterest_description:i.pinterest_description||"",image_credit:"",image_source_url:""};r.data=n,this._save(r)},bulkRemoveAttachment:function(e){var t,i={},a={sub_action:"remove"};for(t in e)i[t]=e[t].get("attachment_id");a.ids=i,this._save(a,this.addAttachmentVariantInMedia)},reorderAttachment:function(e){var t={sub_action:"reorder",ids:e.pluck("attachment_id")};this._save(t)},onChangeAttachment:function(e){var t,i,a,r,n=wp.media.pmc_gallery,o=wp.media.pmc_gallery._frame.states.get("gallery-edit"),s=n.editGalleryLibreryCache,l=o.get("selection"),c="undefined"!=typeof pmc_gallery_admin_options&&"prepend"===pmc_gallery_admin_options.add_gallery,d=1<l.length?l.pluck("attachment_id"):[e.get("attachment_id")],m={},u=n._frame.content.mode(),h=y(".attachment-details .settings-save-status"),p=y(".spinner",h),g=y(".saved",h);if(void 0!==e.get("uploading")&&!0===e.get("uploading"))return!1;if(void 0===e.changed.id&&"gallery_edit"===u)return e=n.updateImageRestriction(e),n.validateImageCredit(e),n.validateImageSourceUrl(e),n.validateImageRestriction(e),r={sub_action:"edit",ids:d,changes:e.changed},p.css({visibility:"visible"}),n._save(r,function(){p.css({visibility:"hidden"}),g.show(),setTimeout(function(){g.hide()},2e3)}),!0;for(i in t=n._frame.state("gallery-edit").get("library"),s)a=s[i].id,m[a]={title:s[i].title,description:s[i].description,caption:s[i].caption,alt:s[i].alt,pinterest_description:s[i].pinterest_description||"",image_credit:s[i].image_credit,image_source_url:s[i].image_source_url,image_restriction:s[i].image_restriction||"none"};return t.each(function(e){for(i in a=e.get("id"),m[a])e.set(i,m[a][i],{silent:!0})}),-1===_.indexOf(_.pluck(s,"attachment_id"),parseInt(e.get("attachment_id"),0))&&t.trigger("bulk:add",[e],c),!1},addAttachmentVariantInMedia:function(e){var t,i,a=wp.media.pmc_gallery._frame.state("gallery-library"),r=a.get("library");for(t in e)i=new Backbone.Model(e[t]),r.add(i);a.reset()},onRemoveAttachmentFromMediaLibrary:function(e){var t=wp.media.pmc_gallery._frame.state("gallery-library").get("library"),i=parseInt(e.get("attachment_id"),0);t.each(function(e){void 0!==e&&parseInt(e.get("attachment_id"),0)===i&&t.remove(e,{silent:!0})})},onChangeAttachmentFromMediaLibrary:function(e,t){var i=e.get("gallery_id"),a=wp.media.pmc_gallery;t.data=i?_.extend(t.data||{},{attachment_id:e.get("attachment_id"),gallery_id:e.get("gallery_id")}):_.extend(t.data||{},{attachment_id:e.get("attachment_id")}),void 0!==e.attributes.compat&&void 0!==e.attributes.compat.item&&(e.set("image_credit",y(".compat-field-image_credit input",e.attributes.compat.item).val()),e.set("image_source_url",y(".compat-field-image_source_url input",e.attributes.compat.item).val()),e.set("image_restriction",y(".compat-field-restricted_image_type input:checked",e.attributes.compat.item).val()),a.validateImageCredit(e),a.validateImageSourceUrl(e),a.validateImageRestriction(e))},removeGalleryFromLibrary:function(){var e=this._frame.state("gallery-edit").get("library"),t=this._frame.state("gallery-library").get("library"),i=e.pluck("attachment_id");t.each(function(e){void 0!==e&&-1!==_.indexOf(i,e.get("attachment_id"))&&t.remove(e,{silent:!0})})},save:function(){var e,t,i=wp.media.pmc_gallery._frame.states.get("gallery-edit").get("library"),a=i.pluck("attachment_id"),r=i.toJSON(),n={};for(t in r)n[t]={id:r[t].attachment_id,title:r[t].title,description:r[t].description,caption:r[t].caption,alt:r[t].alt,pinterest_description:r[t].pinterest_description||"",image_credit:r[t].image_credit,image_source_url:r[t].image_source_url};e={sub_action:"update",data:n,ids:a},this._save(e)},_save:function(e,t){var i=y(".media-modal .spinner"),a=_.extend(e||{},{nonce:wp.media.view.settings.post.nonce,html:wp.media.pmc_gallery.link,post_id:wp.media.view.settings.post.id,security:pmc_gallery_admin_options.pmc_gallery_update});i.css("visibility","visible"),wp.media.post("pmc_gallery_update",a).done(function(e){i.css("visibility","hidden"),"function"==typeof t&&t(e)}).fail(function(){i.css("visibility","hidden")})},createToolBar:function(e){e.options.search||(wp.media.pmc_gallery.renderSortButton(e,"sortNumerically",wp.media.view.l10n.sortNumerically,1),wp.media.pmc_gallery.renderSortButton(e,"sortAlphabetically",wp.media.view.l10n.sortAlphabetically,2))},init:function(){var e=y("#title");this.frame().open(),y("#__wp-uploader-id-1").prependTo("#pmc-gallery-images"),y("#pmc-gallery .media-frame-content .media-toolbar-secondary .media-selection").prependTo("#pmc-gallery > .media-frame-toolbar .media-toolbar-secondary"),y("body").removeClass("modal-open"),this._frame.content.mode("browse"),y("html, body").animate({scrollTop:0},"fast"),0===e.val().length&&e.focus()},select:function(){var t,e,i,o,s=this,a={sub_action:"get",nonce:wp.media.view.settings.post.nonce,post_id:wp.media.view.settings.post.id,security:pmc_gallery_admin_options.pmc_gallery_update};try{e=wp.media.gallery.defaults.id,t=wp.shortcode.next("gallery",wp.media.view.settings.pmc_gallery.shortcode)}catch(e){t=!1}return!!t&&(t=t.shortcode,_.isUndefined(t.get("id"))&&!_.isUndefined(e)&&t.set("id",e),i=wp.media.gallery.attachments(t),(o=new wp.media.model.Selection(i.models,{props:i.props.toJSON(),multiple:!0})).gallery=i.gallery,o.more().done(function(){o.props.set({query:!1}),o.unmirror(),o.props.unset("orderby"),o.on("add",s.addAttachment),0<o.length&&s._frame.content.mode("gallery_edit"),wp.media.post("pmc_gallery_update",a).done(function(e){var t,i,a,r={},n=o.toJSON();if(0===e.length){for(t in s.save(),n)o.models[t].set("image_credit",y(".compat-field-image_credit input",o.models[t].attributes.compat.item).val(),{silent:!0}),o.models[t].set("image_source_url",y(".compat-field-image_source_url input",o.models[t].attributes.compat.item).val(),{silent:!0}),o.models[t].set("image_restriction",y(".compat-field-restricted_image_type input:checked",o.models[t].attributes.compat.item).val(),{silent:!0});return!1}for(t in e)r[e[t].id]=e[t];for(t in o.off("change",s.onChangeAttachment),n)for(i in r[a=n[t].id])o.models[t].set(i,r[a][i],{silent:!0});o.on("change",s.onChangeAttachment)}).fail(function(){})}),o)},validateImageCredit:function(e){var t,i=y("form.compat-item .compat-field-image_credit input"),a=y(".attachment-details .settings-save-status"),r=y(".required",a);void 0===i||i.length<=0||void 0===e||(t=void 0!==(t=e.get("image_credit"))?t:"",i.removeClass("error"),t.length<=0?(i.addClass("error"),r.show()):(i.removeClass("error"),r.hide()))},validateImageSourceUrl:function(e){var t=y("form.compat-item .compat-field-image_source_url input");e.get("image_source_url"),void 0===t||t.length},validateImageRestriction:function(e){var t,i=y("form.compat-item .compat-field-restricted_image_type input"),a=y(".attachment-details .attachment-info"),r=y(".restricted-single-use-notice",a),n=y(".site-restricted-notice",a);void 0!==i&&void 0!==e&&(t=i.filter(":checked").val(),"single_use"===(t=e.changed.image_restriction||t)?(r.show(),i[2].checked=!0):r.hide(),"site_restricted"===t?(n.show(),i[1].checked=!0):n.hide(),"none"===t&&(i[0].checked=!0),y(i).on("change",function(){var e=y(this).val();void 0!==e&&"single_use"===e?r.show():r.hide(),void 0!==e&&"site_restricted"===e?n.show():n.hide()}))},updateImageRestriction:function(e){return null!==/\bap\b|\bassociated press\b/i.exec(e.attributes.image_credit)&&(y(".compat-field-restricted_image_type input")[2].checked=!0,e.changed.image_restriction="single_use"),e}},wp.media.pmc_gallery.init();var i=wp.media.featuredImage.frame();i.on("open",function(){var e=wp.media.pmc_gallery._frame.content.mode(),t=wp.media.pmc_gallery._frame.state("gallery-edit").get("library");"gallery_edit"===e&&(i.content.mode("browse"),t.unobserve(wp.Uploader.queue))}),i.on("close",function(){var e=wp.media.pmc_gallery._frame.content.mode(),t=wp.media.pmc_gallery._frame.state("gallery-edit").get("library");"gallery_edit"===e&&t.observe(wp.Uploader.queue)})})}(jQuery)},272:function(e,t){jQuery(document).ready(function(){var e=jQuery("#enable_interstitial"),t=e.prop("checked"),i=jQuery("#interstitial_refresh_clicks, #interstitial_duration, #start_with_interstitial, #interstitial_ad_code");i.each(function(){var e=jQuery(this);t?e.closest("tr").css("display","table-row"):e.closest("tr").css("display","none")}),e.change(function(){var t=e.prop("checked");i.each(function(){var e=jQuery(this);t?e.closest("tr").css("display","table-row"):e.closest("tr").css("display","none")})})})},273:function(e,t){var i={init:function(){this.nextGalleryMetabox()},nextGalleryMetabox:function(){var e,t,i=document.getElementById("pmc-gallery-next-gallery"),a=document.getElementById("pmc-gallery-automatic-next-gallery");i&&a&&(e=i.querySelector(".pmclinkcontent-post-search"),(t=function(){a.checked?(e.setAttribute("disabled","disabled"),i.classList.add("disabled")):(e.removeAttribute("disabled"),i.classList.remove("disabled"))})(),a.addEventListener("change",t))}};jQuery(document).ready(function(){return i.init()})}});